# SPDX-License-Identifier: MIT

description: |
  MLX90393 magnetic sensor input driver

  Reads magnetic field data from the MLX90393 via I2C and reports
  relative X/Y/WHEEL events. Z-axis press detection is supported via
  threshold with hysteresis and reported as a button event.

  Example usage:
    mlx90393_input: mlx90393-input@0c {
      compatible = "melexis,mlx90393-input";
      reg = <0x0C>;
      polling-interval-ms = <10>;
      deadzone-x = <3>;
      deadzone-y = <3>;
      deadzone-z = <5>;
      z-press-threshold = <50>;
      z-hysteresis = <10>;
    };

compatible: "melexis,mlx90393-input"

include: [base.yaml, i2c-device.yaml]

properties:
  polling-interval-ms:
    type: int
    default: 10
    description: |
      Sensor reading interval in milliseconds.
      Affects responsiveness vs power consumption.

  z-press-threshold:
    type: int
    default: 50
    description: |
      Z-axis threshold value for press detection.
      Values above this threshold trigger pressed state.

  z-hysteresis:
    type: int
    default: 10
    description: |
      Z-axis hysteresis value to prevent state oscillation.
      Press state is released when Z falls below (threshold - hysteresis).

  deadzone-x:
    type: int
    default: 3
    description: X-axis deadzone to filter small movements.

  deadzone-y:
    type: int
    default: 3
    description: Y-axis deadzone to filter small movements.

  deadzone-z:
    type: int
    default: 5
    description: Z-axis deadzone to filter small movements.

  conv-delay-ms:
    type: int
    default: 100
    description: |
      Conversion delay in milliseconds between start command and read
      of measurement results.

  scale-x:
    type: int
    default: 4
    description: Divisor applied to relative X after deadzone.

  scale-y:
    type: int
    default: 4
    description: Divisor applied to relative Y after deadzone.

  scale-z:
    type: int
    default: 4
    description: Divisor applied to relative Z after deadzone.
